#!/bin/sh

set -e

bc > func_pointer.expected << EOF
define fact(x)
{
    if (x < 2) return (1);
    return (x * fact(x - 1));
}

for (i = 1; i < 10; i = i + 1)
{
    i
    fact(i)
}

define fib(x)
{
    if (x <= 2) return (1);
    return fib(x - 1) + fib(x - 2);
}

for (i = 1; i < 10; i = i + 1)
{
    i
    fib(i)
}
EOF

`dirname "$0"`/func_pointer > func_pointer.actual

diff -q func_pointer.expected func_pointer.actual
